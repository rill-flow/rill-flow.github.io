"use strict";(self.webpackChunkrill_flow_github_io=self.webpackChunkrill_flow_github_io||[]).push([[5091],{2026:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>p,frontMatter:()=>i,metadata:()=>o,toc:()=>r});var l=a(5893),s=a(1151);const i={sidebar_position:2},t="\u66f4\u591a\u793a\u4f8b",o={id:"getting-started/sample",title:"\u66f4\u591a\u793a\u4f8b",description:"\u6d41\u7a0b\u63a7\u5236",source:"@site/docs/getting-started/02-sample.md",sourceDirName:"getting-started",slug:"/getting-started/sample",permalink:"/docs/getting-started/sample",draft:!1,unlisted:!1,editUrl:"https://github.com/rill-flow/rill-flow.github.io/edit/main/docs/getting-started/02-sample.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"\u5feb\u901f\u5f00\u59cb",permalink:"/docs/getting-started/quickstart"},next:{title:"\u540d\u8bcd\u89e3\u91ca",permalink:"/docs/getting-started/explain"}},c={},r=[{value:"\u6d41\u7a0b\u63a7\u5236",id:"\u6d41\u7a0b\u63a7\u5236",level:2},{value:"\u8c03\u7528API\u5e76\u5904\u7406\u7ed3\u679c",id:"\u8c03\u7528api\u5e76\u5904\u7406\u7ed3\u679c",level:2},{value:"\u5e76\u884c\u548c\u5f02\u6b65\u5904\u7406",id:"\u5e76\u884c\u548c\u5f02\u6b65\u5904\u7406",level:2},{value:"\u5f15\u7528\u5b50\u56fe",id:"\u5f15\u7528\u5b50\u56fe",level:2},{value:"\u63a5\u6536kafka\u6d88\u606f\u540e\u8c03\u7528AIGC\u7ffb\u8bd1\u6587\u672c",id:"\u63a5\u6536kafka\u6d88\u606f\u540e\u8c03\u7528aigc\u7ffb\u8bd1\u6587\u672c",level:2},{value:"\u901a\u8fc7\u6587\u672c\u751f\u6210\u56fe\u7247",id:"\u901a\u8fc7\u6587\u672c\u751f\u6210\u56fe\u7247",level:2},{value:"\u901a\u8fc7\u6587\u672c\u751f\u6210\u89c6\u9891",id:"\u901a\u8fc7\u6587\u672c\u751f\u6210\u89c6\u9891",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.a)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h1,{id:"\u66f4\u591a\u793a\u4f8b",children:"\u66f4\u591a\u793a\u4f8b"}),"\n",(0,l.jsx)(n.h2,{id:"\u6d41\u7a0b\u63a7\u5236",children:"\u6d41\u7a0b\u63a7\u5236"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{alt:"flow_control",src:a(2291).Z+"",width:"873",height:"281"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"https://github.com/weibocom/rill-flow/blob/main/docs/samples/switch-sample.yaml",children:"yaml\u5b9a\u4e49\u6587\u4ef6"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cURL",children:"curl --location 'http://127.0.0.1:8080/flow/submit.json?descriptor_id=rillFlowSample:switchSample' \\\n--header 'Content-Type: application/json' \\\n--data '{\n     \"input_num\":10\n}'\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\u8c03\u7528api\u5e76\u5904\u7406\u7ed3\u679c",children:"\u8c03\u7528API\u5e76\u5904\u7406\u7ed3\u679c"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{alt:"call_api",src:a(6325).Z+"",width:"583",height:"84"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"https://github.com/weibocom/rill-flow/blob/main/docs/samples/call-api-sample.yaml",children:"yaml\u5b9a\u4e49\u6587\u4ef6"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u542f\u52a8sample api\u670d\u52a1"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-Bash",children:"cat <<EOF > docker-compose-sample.yaml\nversion: '3'\nservices:\n  sample-executor:\n    image: weibocom/rill-flow-sample:sample-executor \nEOF\ndocker-compose up -d\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cURL",children:"curl --location 'http://127.0.0.1:8080/flow/submit.json?descriptor_id=rillFlowSample:callApiSample' \\\n--header 'Content-Type: application/json' \\\n--data '{\n     \"input_num\":10\n}'\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\u5e76\u884c\u548c\u5f02\u6b65\u5904\u7406",children:"\u5e76\u884c\u548c\u5f02\u6b65\u5904\u7406"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{alt:"parallel",src:a(3482).Z+"",width:"813",height:"231"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"https://github.com/weibocom/rill-flow/blob/main/docs/samples/parallel-async-dag.yaml",children:"yaml\u5b9a\u4e49\u6587\u4ef6"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u542f\u52a8sample api\u670d\u52a1"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-Bash",children:"cat <<EOF > docker-compose-sample.yaml\nversion: '3'\nservices:\n  sample-executor:\n    image: weibocom/rill-flow-sample:sample-executor \nEOF\ndocker-compose up -d\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cURL",children:"curl --location 'http://127.0.0.1:8080/flow/submit.json?descriptor_id=rillFlowSample%3AparallelAsyncTask' \\\n--header 'Content-Type: application/json' \\\n--data '{\n    \"rand_num\":20\n}'\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\u5f15\u7528\u5b50\u56fe",children:"\u5f15\u7528\u5b50\u56fe"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{alt:"ref_subflow",src:a(8930).Z+"",width:"751",height:"441"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"https://github.com/weibocom/rill-flow/blob/main/docs/samples/ref-dag.yaml",children:"yaml\u5b9a\u4e49\u6587\u4ef6"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cURL",children:"curl --location 'http://127.0.0.1:8080/flow/submit.json?descriptor_id=rillFlowSample%3AsubdagTask' \\\n--header 'Content-Type: application/json' \\\n--data '{\n    \"parent_rand_num\":20\n}'\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\u63a5\u6536kafka\u6d88\u606f\u540e\u8c03\u7528aigc\u7ffb\u8bd1\u6587\u672c",children:"\u63a5\u6536kafka\u6d88\u606f\u540e\u8c03\u7528AIGC\u7ffb\u8bd1\u6587\u672c"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{alt:"call_aigc_translate",src:a(8513).Z+"",width:"483",height:"101"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"https://github.com/weibocom/rill-flow/blob/main/docs/samples/kafka-translate.yaml",children:"yaml\u5b9a\u4e49\u6587\u4ef6"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u542f\u52a8kafka"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-Bash",children:'cat << EOF > docker-compose-sample.yaml\nversion: \'3\'\nservices:\n  zoo1:\n    image: confluentinc/cp-zookeeper:7.3.2\n    hostname: zoo1\n    container_name: zoo1\n    ports:\n      - "2181:2181"\n    environment:\n      ZOOKEEPER_CLIENT_PORT: 2181\n      ZOOKEEPER_SERVER_ID: 1\n      ZOOKEEPER_SERVERS: zoo1:2888:3888\n  kafka1:\n    image: confluentinc/cp-kafka:7.3.2\n    hostname: kafka1\n    container_name: kafka1\n    ports:\n      - "9092:9092"\n      - "29092:29092"\n      - "9999:9999"\n    environment:\n      KAFKA_ADVERTISED_LISTENERS: INTERNAL://kafka1:19092,EXTERNAL://${DOCKER_HOST_IP:-127.0.0.1}:9092,DOCKER://host.docker.internal:29092\n      KAFKA_ADVERTISED_HOST_NAME: localhost\n      KAFKA_CREATE_TOPICS: "topic_input:1:1"\n      KAFKA_LISTENER_SECURITY_PROTOCOL_MAP: INTERNAL:PLAINTEXT,EXTERNAL:PLAINTEXT,DOCKER:PLAINTEXT\n      KAFKA_INTER_BROKER_LISTENER_NAME: INTERNAL\n      KAFKA_ZOOKEEPER_CONNECT: "zoo1:2181"\n      KAFKA_BROKER_ID: 1\n      KAFKA_LOG4J_LOGGERS: "kafka.controller=INFO,kafka.producer.async.DefaultEventHandler=INFO,state.change.logger=INFO"\n      KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR: 1\n      KAFKA_TRANSACTION_STATE_LOG_REPLICATION_FACTOR: 1\n      KAFKA_TRANSACTION_STATE_LOG_MIN_ISR: 1\n      KAFKA_JMX_PORT: 9999\n      KAFKA_JMX_HOSTNAME: ${DOCKER_HOST_IP:-127.0.0.1}\n      KAFKA_AUTHORIZER_CLASS_NAME: kafka.security.authorizer.AclAuthorizer\n      KAFKA_ALLOW_EVERYONE_IF_NO_ACL_FOUND: "true"\n    depends_on:\n      - zoo1\nEOF\ndocker-compose -f docker-compose-sample.yaml up -d \n'})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u521b\u5efakafka trigger"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cURL",children:'curl -XPOST \'http://127.0.0.1:8080/flow/trigger/add_trigger.json?descriptor_id=rillFlowSample:kafkaTranslate&type=kafka\' -d \'{"topic": "topic_input", "kafka_server":\n"<YOUR_KAFKA_HOST>:9092", "group_id": "rill-flow-group"}\' -H \'Content-Type: application/json\'\n'})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u63d0\u4ea4kafka\u6d88\u606f"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-Bash",children:'docker exec kafka1 bash -c \'echo {\\"message\\":\\"this is a message from rill-flow\\"} |kafka-console-producer  --bootstrap-server localhost:19092 --topic topic_input\'\n'})}),"\n",(0,l.jsx)(n.h2,{id:"\u901a\u8fc7\u6587\u672c\u751f\u6210\u56fe\u7247",children:"\u901a\u8fc7\u6587\u672c\u751f\u6210\u56fe\u7247"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{alt:"text_to_pic",src:a(9702).Z+"",width:"823",height:"106"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"https://github.com/weibocom/rill-flow/blob/main/docs/samples/txt2img.yaml",children:"yaml\u5b9a\u4e49\u6587\u4ef6"})}),"\n",(0,l.jsx)(n.h2,{id:"\u901a\u8fc7\u6587\u672c\u751f\u6210\u89c6\u9891",children:"\u901a\u8fc7\u6587\u672c\u751f\u6210\u89c6\u9891"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{alt:"text_to_video",src:a(6443).Z+"",width:"1093",height:"281"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"https://github.com/weibocom/rill-flow/blob/main/docs/samples/txt2video/txt2video.yaml",children:"yaml\u5b9a\u4e49\u6587\u4ef6"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"https://github.com/weibocom/rill-flow/blob/main/docs/samples/txt2video-docker-compose.yaml",children:"docker-compose\u90e8\u7f72\u5b9a\u4e49\u6587\u4ef6"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u6d41\u7a0b\u56fe\u6267\u884c\u8be6\u60c5\u56fe\u793a"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{alt:"text_to_pic",src:a(7195).Z+"",width:"1503",height:"930"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://youtu.be/SqbP7QBTJEk",children:"\u793a\u4f8b\u89c6\u9891\u6548\u679c"})}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},8513:(e,n,a)=>{a.d(n,{Z:()=>l});const l=a.p+"assets/images/call_aigc_translate-7bcdd7ad6a89d73ec89a939c8f718fbc.svg"},6325:(e,n,a)=>{a.d(n,{Z:()=>l});const l=a.p+"assets/images/call_api-c3f9a43c73713c20a9da817119bd201e.svg"},2291:(e,n,a)=>{a.d(n,{Z:()=>l});const l=a.p+"assets/images/flow_control-eda84f977a7c8030fb3b3dea9183c66b.svg"},3482:(e,n,a)=>{a.d(n,{Z:()=>l});const l=a.p+"assets/images/parallel-c30e80f4a0fdbcb7d3f0b287b026d6bc.svg"},8930:(e,n,a)=>{a.d(n,{Z:()=>l});const l=a.p+"assets/images/ref_subflow-87efcdd0ae0221f32be4199125eeb68e.svg"},9702:(e,n,a)=>{a.d(n,{Z:()=>l});const l=a.p+"assets/images/text_to_pic-413a3eeabd8bb7baf00b5f626edaa263.svg"},6443:(e,n,a)=>{a.d(n,{Z:()=>l});const l=a.p+"assets/images/text_to_video-f46eed6144608c644b344704f7b0a67b.svg"},7195:(e,n,a)=>{a.d(n,{Z:()=>l});const l=a.p+"assets/images/txt2video_execution_detail-7147b634755a632821e19ea9043b2d93.png"},1151:(e,n,a)=>{a.d(n,{Z:()=>o,a:()=>t});var l=a(7294);const s={},i=l.createContext(s);function t(e){const n=l.useContext(i);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),l.createElement(i.Provider,{value:n},e.children)}}}]);