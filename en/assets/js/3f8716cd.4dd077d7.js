"use strict";(self.webpackChunkrill_flow_github_io=self.webpackChunkrill_flow_github_io||[]).push([[9034],{54:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>r,default:()=>u,frontMatter:()=>s,metadata:()=>l,toc:()=>c});var t=i(5893),o=i(1151);const s={sidebar_position:2},r="Prometheus Monitoring Integration",l={id:"user-guide/monitor/prometheus",title:"Prometheus Monitoring Integration",description:"Overview",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/user-guide/05-monitor/02-prometheus.md",sourceDirName:"user-guide/05-monitor",slug:"/user-guide/monitor/prometheus",permalink:"/en/docs/user-guide/monitor/prometheus",draft:!1,unlisted:!1,editUrl:"https://crowdin.com/project/rill-flow/en",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Trace Link Tracking",permalink:"/en/docs/user-guide/monitor/trace"},next:{title:"\u7ba1\u7406\u540e\u53f0",permalink:"/en/docs/category/\u7ba1\u7406\u540e\u53f0"}},a={},c=[{value:"Overview",id:"overview",level:2},{value:"Metrics Path",id:"metrics-path",level:2},{value:"Monitoring Guide",id:"monitoring-guide",level:2},{value:"Customizing the Prometheus.yml File",id:"customizing-the-prometheusyml-file",level:3},{value:"Deploying Prometheus",id:"deploying-prometheus",level:3},{value:"Accessing Prometheus",id:"accessing-prometheus",level:3},{value:"Visualization Monitoring",id:"visualization-monitoring",level:2},{value:"Advantages",id:"advantages",level:3},{value:"Grafana Download Link",id:"grafana-download-link",level:3},{value:"Configuration Guide",id:"configuration-guide",level:3},{value:"Effect Display",id:"effect-display",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"prometheus-monitoring-integration",children:"Prometheus Monitoring Integration"}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsxs)(n.p,{children:["Rill Flow, a powerful workflow engine service, not only offers efficient workflow processing capabilities but also includes essential system monitoring features. These monitoring features are integrated via the ",(0,t.jsx)(n.a,{href:"https://prometheus.io/",children:"Prometheus"})," component, simplifying system monitoring configuration and customization, and enabling visualization of the status and performance of the Rill Flow workflow engine.Prometheus is integrated by default in the Rill Flow project. To view monitoring metrics data, use the following command:"]}),"\n",(0,t.jsx)(n.h2,{id:"metrics-path",children:"Metrics Path"}),"\n",(0,t.jsx)(n.p,{children:"The Rill Flow project is already integrating Prometheus.To view monitoring indicators to collect data, you can use the following command\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-cURL",children:"http:///127.0.0.1:8080/actuator/prometheus\n"})}),"\n",(0,t.jsx)(n.h2,{id:"monitoring-guide",children:"Monitoring Guide"}),"\n",(0,t.jsx)(n.h3,{id:"customizing-the-prometheusyml-file",children:"Customizing the Prometheus.yml File"}),"\n",(0,t.jsx)(n.p,{children:"Example configuration file:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yml",children:"global:\n  scrape_interval: 15s\n  \nscrape_configs:\n  - job_name: \"Rill Flow\"\n    metrics_path: '/actuator/prometheus'\n    static_configs:\n      - targets: ['host.docker.internal:8080']\n"})}),"\n",(0,t.jsx)(n.p,{children:"Configuration explanation:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"global"}),": Global configuration section, defining overall settings.","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"scrape_interval"}),": Time interval for data collection.",(0,t.jsx)(n.code,{children:"scrape_interval"}),": The data collection interval. In this example, data is collected every 15 seconds."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"scrape_configs"}),": Data collection configuration section, defining targets and settings for data collection.","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"job_name"}),": Name of the collection job, used to identify the task."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"metrics_path"}),": Specifies the path for collecting metrics. In this example, set to ",(0,t.jsx)(n.code,{children:"/actuator/prometheus"})," to collect metrics from the ",(0,t.jsx)(n.code,{children:"/actuator/prometheus"})," endpoint.Example Visuals"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"static_configs"}),": Static target configuration section, defining targets for data collection.","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"targets"}),": Target address and port.",(0,t.jsx)(n.code,{children:"targets"}),": Address and port of the target. Set to ",(0,t.jsx)(n.code,{children:"host.docker.internal:8080"})," to collect metrics from port 8080 on"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"deploying-prometheus",children:"Deploying Prometheus"}),"\n",(0,t.jsx)(n.p,{children:"Run Prometheus using Docker:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"docker run - p 90:900-v /path/to/prometheus.yml:/etc/prometheus/prometheus\n"})}),"\n",(0,t.jsx)(n.p,{children:"Note:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Replace ",(0,t.jsx)(n.code,{children:"/path/to"})," with the actual configuration file directory path."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"accessing-prometheus",children:"Accessing Prometheus"}),"\n",(0,t.jsx)(n.p,{children:"Access the Prometheus interface:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-url",children:"http://localhost:9090\n"})}),"\n",(0,t.jsx)(n.h2,{id:"visualization-monitoring",children:"Visualization Monitoring"}),"\n",(0,t.jsx)(n.h3,{id:"advantages",children:"Advantages"}),"\n",(0,t.jsx)(n.p,{children:"The integration of Prometheus and Grafana offers robust monitoring and visualization capabilities. This is crucial for real-time system performance and status monitoring, quick problem identification, and troubleshooting. As open-source tools, they allow users the freedom to use and customize them to meet diverse monitoring requirements.This is essential for real-time monitoring of system performance and state, rapid positioning, and problem-solving.They serve as open source tools that allow users to use and customize freely to meet monitoring needs."}),"\n",(0,t.jsx)(n.h3,{id:"grafana-download-link",children:"Grafana Download Link"}),"\n",(0,t.jsx)(n.p,{children:"Download Grafana from the following URL:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-URL",children:"https://grafana.com/grafana/download\n"})}),"\n",(0,t.jsx)(n.h3,{id:"configuration-guide",children:"Configuration Guide"}),"\n",(0,t.jsxs)(n.p,{children:["For guidance on integrating Prometheus with Grafana, refer to the document: ",(0,t.jsx)(n.a,{href:"https://prometheus.io/docs/visualization/grafana/",children:"Grafana\u2019s Support for Prometheus"})]}),"\n",(0,t.jsx)(n.h3,{id:"effect-display",children:"Effect Display"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["The following image illustrates an example of a Grafana configuration showing the average response time for the ",(0,t.jsx)(n.code,{children:"submit"})," interface of Rill Flow:\n",(0,t.jsx)(n.img,{alt:"SUBMIT",src:i(7818).Z+"",width:"2826",height:"1162"})]}),"\n",(0,t.jsx)(n.li,{children:"The corresponding Grafana configuration JSON is as follows:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "datasource": {\n    "type": "prometheus",\n    "uid": "e6f8f070-36b8-4303-8c13-10017ffb2ffe"\n  },\n  "fieldConfig": {\n    "defaults": {\n      "custom": {\n        "drawStyle": "line",\n        "lineInterpolation": "linear",\n        "barAlignment": 0,\n        "lineWidth": 1,\n        "fillOpacity": 0,\n        "gradientMode": "none",\n        "spanNulls": false,\n        "insertNulls": false,\n        "showPoints": "auto",\n        "pointSize": 5,\n        "stacking": {\n          "mode": "none",\n          "group": "A"\n        },\n        "axisPlacement": "auto",\n        "axisLabel": "",\n        "axisColorMode": "text",\n        "axisBorderShow": false,\n        "scaleDistribution": {\n          "type": "linear"\n        },\n        "axisCenteredZero": false,\n        "hideFrom": {\n          "tooltip": false,\n          "viz": false,\n          "legend": false\n        },\n        "thresholdsStyle": {\n          "mode": "off"\n        }\n      },\n      "color": {\n        "mode": "palette-classic"\n      },\n      "mappings": [],\n      "thresholds": {\n        "mode": "absolute",\n        "steps": [\n          {\n            "color": "green",\n            "value": null\n          },\n          {\n            "color": "red",\n            "value": 80\n          }\n        ]\n      },\n      "unit": "s"\n    },\n    "overrides": [\n      {\n        "__systemRef": "hideSeriesFrom",\n        "matcher": {\n          "id": "byNames",\n          "options": {\n            "mode": "exclude",\n            "names": [\n              "rill-flow-web"\n            ],\n            "prefix": "All except:",\n            "readOnly": true\n          }\n        },\n        "properties": [\n          {\n            "id": "custom.hideFrom",\n            "value": {\n              "legend": false,\n              "tooltip": false,\n              "viz": true\n            }\n          }\n        ]\n      }\n    ]\n  },\n  "gridPos": {\n    "h": 8,\n    "w": 12,\n    "x": 0,\n    "y": 0\n  },\n  "id": 1,\n  "options": {\n    "tooltip": {\n      "mode": "single",\n      "sort": "none"\n    },\n    "legend": {\n      "showLegend": true,\n      "displayMode": "list",\n      "placement": "bottom",\n      "calcs": []\n    }\n  },\n  "targets": [\n    {\n      "datasource": {\n        "type": "prometheus",\n        "uid": "e6f8f070-36b8-4303-8c13-10017ffb2ffe"\n      },\n      "editorMode": "code",\n      "expr": "http_server_requests_seconds_sum{uri=\\"/flow/submit.json\\"}/http_server_requests_seconds_count{uri=\\"/flow/submit.json\\"}",\n      "instant": false,\n      "legendFormat": "rill-flow-web",\n      "range": true,\n      "refId": "A"\n    }\n  ],\n  "title": "submit.json\u63a5\u53e3\u5e73\u5747\u8017\u65f6",\n  "type": "timeseries"\n}\n'})})]})}function u(e={}){const{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},7818:(e,n,i)=>{i.d(n,{Z:()=>t});const t=i.p+"assets/images/submit_garafana-e4a6608c9f5e127903ec6d146fba2aca.jpg"},1151:(e,n,i)=>{i.d(n,{Z:()=>l,a:()=>r});var t=i(7294);const o={},s=t.createContext(o);function r(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);