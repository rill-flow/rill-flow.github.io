<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-user-guide/defination/task-and-dispatcher" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0">
<title data-rh="true">Tasks and Dispatchers | Rill FLow</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://rill-flow.github.io/en/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://rill-flow.github.io/en/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://rill-flow.github.io/en/docs/user-guide/defination/task-and-dispatcher"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="zh"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Tasks and Dispatchers | Rill FLow"><meta data-rh="true" name="description" content="Task"><meta data-rh="true" property="og:description" content="Task"><link data-rh="true" rel="icon" href="/en/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://rill-flow.github.io/en/docs/user-guide/defination/task-and-dispatcher"><link data-rh="true" rel="alternate" href="https://rill-flow.github.io/en/docs/user-guide/defination/task-and-dispatcher" hreflang="en"><link data-rh="true" rel="alternate" href="https://rill-flow.github.io/docs/user-guide/defination/task-and-dispatcher" hreflang="zh"><link data-rh="true" rel="alternate" href="https://rill-flow.github.io/docs/user-guide/defination/task-and-dispatcher" hreflang="x-default"><link rel="stylesheet" href="/en/assets/css/styles.eb4153ca.css">
<script src="/en/assets/js/runtime~main.61291073.js" defer="defer"></script>
<script src="/en/assets/js/main.d913a192.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/en/"><div class="navbar__logo"><img src="/en/img/logo.svg" alt="Rill Flow logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/en/img/logo.svg" alt="Rill Flow logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Rill Flow</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/en/docs/intro">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/weibocom/rill-flow" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub"></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/en/docs/user-guide/defination/task-and-dispatcher" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/docs/user-guide/defination/task-and-dispatcher" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh">中文</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/intro">Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/category/快速开始">Quick Start</a><button aria-label="Expand sidebar category &#x27;Quick Start&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/en/docs/category/用户指南">User Guide</a><button aria-label="Collapse sidebar category &#x27;User Guide&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/user-guide/arch">Architecture Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/user-guide/deploy">Deployment Instructions</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/en/docs/category/流程定义">Process Definition</a><button aria-label="Collapse sidebar category &#x27;Process Definition&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/user-guide/defination/flow">Workflow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/en/docs/user-guide/defination/task-and-dispatcher">Tasks and Dispatchers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/user-guide/defination/executor">Executor</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/user-guide/defination/context-and-mapping">Context and Parameter Mapping</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/user-guide/defination/control">Flow Control</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/user-guide/defination/ref">Workflow Reference</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/en/docs/category/流程执行">Process Execution</a><button aria-label="Expand sidebar category &#x27;Process Execution&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/en/docs/category/监控">Monitor</a><button aria-label="Expand sidebar category &#x27;Monitor&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/en/docs/category/管理后台">Administration backend</a><button aria-label="Expand sidebar category &#x27;Administration backend&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/user-guide/api">API Documentation</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/category/最佳实践">Best practices</a><button aria-label="Expand sidebar category &#x27;Best practices&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/category/开发者指南">Developer Guide</a><button aria-label="Expand sidebar category &#x27;Developer Guide&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/faq">FAQ</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/en/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/en/docs/category/用户指南"><span itemprop="name">User Guide</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/en/docs/category/流程定义"><span itemprop="name">Process Definition</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Tasks and Dispatchers</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Tasks and Dispatchers</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="task">Task<a href="#task" class="hash-link" aria-label="Direct link to Task" title="Direct link to Task">​</a></h2>
<p>Task is for every node in DAG (with no loop map).A task represents each node in a Directed Acyclic Graph (DAG). In a distributed execution environment, tasks can be bound to dispatchers (Dispatchers) through the <code>resourceName</code> attribute. The dispatcher is responsible for distributing task information to different executors (Executors).</p>
<p><img loading="lazy" alt="Task Architecture Diagram" src="/en/assets/images/task_arch-2396c29b31ad1792522c467062302d69.svg" width="421" height="346" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="task-attributes">Task Attributes<a href="#task-attributes" class="hash-link" aria-label="Direct link to Task Attributes" title="Direct link to Task Attributes">​</a></h3>
<p>Task attributes are defined in the <code>tasks</code> field of the DAG&#x27;s YAML description file. These attributes include<!-- -->:These<!-- --> attributes include：</p>
<table><thead><tr><th>Attribute Name</th><th>Required</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>Name</td><td>Yes</td><td>String</td><td>Name of the task</td></tr><tr><td>Category</td><td>Yes</td><td>String</td><td>Task category, details at <a href="#category">category</a></td></tr><tr><td>Pattern</td><td>Yes</td><td>String</td><td>Execution mode of the task, options are synchronous (<code>task_sync</code>) or asynchronous (<code>task_async</code>)</td></tr><tr><td>resourceProtocol</td><td>No</td><td>String</td><td>Specifies the sender resource protocol or, if empty, the <code>resourceName</code> protocol is parsed.<code>resourceProtocol</code> and <code>resourceName</code> cannot be empty at the same time</td></tr><tr><td>resourceName</td><td>No</td><td>String</td><td>Resource descriptor, see<a href="#dispatcher">派发器</a></td></tr><tr><td>next</td><td>No</td><td>String</td><td>Name of next task</td></tr><tr><td>Key</td><td>Yes</td><td>map</td><td>Enter mapping, see<a href="/en/docs/user-guide/defination/context-and-mapping">参数映射</a></td></tr><tr><td>Parameter</td><td>Yes</td><td>map</td><td>Default value for task types, if <code>inputMapping</code> and <code>parameters</code> are defined using <code>inputMappings</code></td></tr><tr><td>protocol from <code>resourceName</code>. Can&#x27;t be empty if <code>resourceName</code> is also empty |
| resourceName      | No       | string  | Resource descriptor, see <a href="#dispatcher">Dispatcher</a>                                                 |
| next              | No       | string  | Name of the next task                                                                              |
| inputMappings     | No       | map     | Input mappings, details at <a href="/en/docs/user-guide/defination/context-and-mapping">parameter mapping</a>                                |
| parameters        | No       | map     | Default values for task input, <code>inputMappings</code> takes precedence if the same key is defined in both |
| outputMappings    | No       | map     | Output mappings, details at <a href="/en/docs/user-guide/defination/context-and-mapping">parameter mapping</a>                               |
| tolerance         | No       | boolean | Whether to ignore failure and skip the current node                                                |
| successConditions | No       | string  | Defines success conditions, takes precedence over <code>result_type</code>, success if all conditions are met  |
| failConditions    | No       | string  | Defines failure conditions, takes precedence over <code>successConditions</code>, fails if all conditions are met |</td><td>Yes</td><td>map</td><td>Output mapping, see<a href="/en/docs/user-guide/defination/context-and-mapping">参数映射</a></td></tr><tr><td>olerance</td><td>No</td><td>boolean</td><td>Whether to ignore and continue when the task fails.</td></tr><tr><td>lucess Conditions</td><td>No</td><td>String</td><td>Defines the success condition, priority is higher than <code>result_type</code>. The task is successful if the output satisfies all the conditions, otherwise failure</td></tr><tr><td>FailConditions</td><td>Yes</td><td>String</td><td>Define failed condition, priority is higher than <code>successConditions</code>. Task fails if output meets all conditions, otherwise success</td></tr><tr><td>Retry</td><td>Yes</td><td>map</td><td>For compute classes, if execution fails, Rill Flow will try again according to the strategy configured by this option, see<a href="#retry">retry</a></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="category">Category<a href="#category" class="hash-link" aria-label="Direct link to Category" title="Direct link to Category">​</a></h3>
<p>Tasks are categorized as follows:</p>
<ul>
<li><strong>Computational Tasks</strong>
<ul>
<li><code>function</code>: Executes specific computational tasks, such as HTTP or RPC call tasks.</li>
</ul>
</li>
<li><strong>Flow Control Tasks</strong>
<ul>
<li><code>choice</code>: Chooses one task to execute from multiple sub-tasks.</li>
<li><code>foreach</code>: Repeatedly executes a set of sub-tasks.</li>
<li><code>pass</code>: A null task that is marked successful upon execution.</li>
<li><code>return</code>: Decides whether to skip subsequent tasks based on conditions.
For more information, refer to <a href="/en/docs/user-guide/defination/control">Flow Control</a>.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="pattern">Pattern<a href="#pattern" class="hash-link" aria-label="Direct link to Pattern" title="Direct link to Pattern">​</a></h3>
<p>The <code>pattern</code> attribute specifies the mode of execution between the dispatcher and executor, supporting synchronous (<code>task_sync</code>) and asynchronous (<code>task_async</code>) modes.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="retry">Retry<a href="#retry" class="hash-link" aria-label="Direct link to Retry" title="Direct link to Retry">​</a></h3>
<p>Retry strategy. There may be a failure of call for computing classes.This parameter sets a failed retry strategy, eg:：</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">Retry</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  maxRetryTimes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  intervalInseconds</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  multipleier</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>There are three options： in retry structure</p>
<ul>
<li>maxRetryTimes：maximum retries with a default value of 0, i.e.：does not retry.</li>
<li>IntervalInSeconds：retries interval seconds, default value is 0, i.e.：fails to retry.</li>
<li>Multipler：retries to zoom at intervals, with a default value of 1, i.e.：.</li>
</ul>
<p>Rill Flow will try again with the strategy in the above configuration after computing failed tasks.Assume that n times have already been tried, the next retry will be between：<code>intervalInseconds*multipleer^n</code>, and at most maxRetryTimes times.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="synchronous-and-asynchronous-task-modes">Synchronous and Asynchronous Task Modes<a href="#synchronous-and-asynchronous-task-modes" class="hash-link" aria-label="Direct link to Synchronous and Asynchronous Task Modes" title="Direct link to Synchronous and Asynchronous Task Modes">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="synchronous-mode-task_sync">Synchronous Mode (<code>task_sync</code>)<a href="#synchronous-mode-task_sync" class="hash-link" aria-label="Direct link to synchronous-mode-task_sync" title="Direct link to synchronous-mode-task_sync">​</a></h3>
<p>In synchronous mode, the dispatcher maintains a connection with the executor until the task is completed or times out. This mode is suitable for tasks that take milliseconds to execute.This mode is suitable for quick tasks in milliseconds.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="asynchronous-mode-task_async">Asynchronous Mode (<code>task_async</code>)<a href="#asynchronous-mode-task_async" class="hash-link" aria-label="Direct link to asynchronous-mode-task_async" title="Direct link to asynchronous-mode-task_async">​</a></h3>
<p>In asynchronous mode, the dispatcher includes a callback address <code>X-Callback-Url</code> in the Header and passes the task information to the executor. After completing the task, the executor notifies Rill Flow of the results by calling the <code>X-Callback-Url</code>. This mode is suitable for heavy computational tasks or tasks that take longer to complete, such as AIGC model generation tasks.Tasks select a dispatcher through the <code>resourceProtocol</code> attribute. The same type of dispatcher can correspond to multiple executors. Tasks bind to dispatchers and executors through the <code>resourceName</code> attribute. Rill Flow supports various dispatchers, including HTTP protocol dispatcher, K8s Service dispatcher, Alibaba Cloud Tongyi Qianwen dispatcher, ChatGPT dispatcher, etc. Rill Flow also supports extending dispatchers through <a href="/en/docs/develop/plugin/create-plugin">plugins</a>, offering flexibility in implementing custom dispatchers.This mode is applicable to heavy computing or long time performing tasks, such as AIGC model generation tasks.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="dispatcher">Dispatcher<a href="#dispatcher" class="hash-link" aria-label="Direct link to Dispatcher" title="Direct link to Dispatcher">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h3>
<p>Tasks are selected via the <code>resourceProtocol</code> attribute.The same type of distributor can correspond to multiple executors.Tasks are bound by the <code>resourceName</code> property to assign and execute.Rill Flow supports a variety of dispatchers, such as HTTP protocol dispatchers, K8s Service dispatchers, Aliyun ChatGPT dispatchers, etc.Rill Flow also supports the extension of the dispatcher via<a href="/en/docs/develop/plugin/create-plugin">插件</a>, providing flexibility to achieve a custom dispatcher.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="resourceprotocol">resourceProtocol<a href="#resourceprotocol" class="hash-link" aria-label="Direct link to resourceProtocol" title="Direct link to resourceProtocol">​</a></h3>
<p>Tasks are assigned via <code>resourceProtocol</code>.This is an optional field.Tasks specify a dispatcher using the <code>resourceProtocol</code> attribute. This field is optional. If the task&#x27;s <code>resourceProtocol</code> is empty, the <code>resourceProtocol</code> will be parsed from the <code>resourceName</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="resourcename">resourceName<a href="#resourcename" class="hash-link" aria-label="Direct link to resourceName" title="Direct link to resourceName">​</a></h3>
<p>Tasks describe a dispatcher and executor using a simplified format of a Uniform Resource Locator (URL). The common format is<!-- -->:Common<!-- --> format is：</p>
<div class="language-txt codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-txt codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[Protocol Type]://[Server Address]:[Port Number]/[Resource Hierarchy UNIX File Path][File Name]?[Query Parameters]#[Fragment ID]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>For example:</p>
<div class="language-txt codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-txt codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">http://www.sample.com/callback.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="supported-dispatcher-types">Supported Dispatcher Types<a href="#supported-dispatcher-types" class="hash-link" aria-label="Direct link to Supported Dispatcher Types" title="Direct link to Supported Dispatcher Types">​</a></h4>
<p>Rill Flow supports the following types of dispatchers:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="http-protocol-dispatcher">HTTP protocol dispatcher<a href="#http-protocol-dispatcher" class="hash-link" aria-label="Direct link to HTTP protocol dispatcher" title="Direct link to HTTP protocol dispatcher">​</a></h4>
<p>The HTTP dispatcher is used to forward task information. When initiating an HTTP request, it uses <code>application-json</code> as the <code>content-type</code>, and the received <code>json</code> string is used as output.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="task-attributes-1">Task Attributes<a href="#task-attributes-1" class="hash-link" aria-label="Direct link to Task Attributes" title="Direct link to Task Attributes">​</a></h5>
<table><thead><tr><th>Parameter</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>resourceProtocol</td><td>http/https</td><td>Specifies the protocol type</td></tr><tr><td>resourceName</td><td><a href="http://www.sample.com/execute.json" target="_blank" rel="noopener noreferrer">http://www.sample.com/execute.json</a></td><td>HTTP URL</td></tr><tr><td>Pattern</td><td>task_sync/task_async</td><td>Specifies the task execution mode, synchronous (<code>task_sync</code>) or asynchronous (<code>task_async</code>)</td></tr><tr><td>requestType</td><td>get/post</td><td>HTTP request type, default is post</td></tr></tbody></table>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="input-parameters">Input Parameters<a href="#input-parameters" class="hash-link" aria-label="Direct link to Input Parameters" title="Direct link to Input Parameters">​</a></h5>
<table><thead><tr><th>Key</th><th>Value Type</th><th>Description</th></tr></thead><tbody><tr><td>query_params_*</td><td>map</td><td>GET request parameters, keys with <code>query_params_</code> prefix should be of map type, appended to the URL as key=value</td></tr><tr><td>request_header_*</td><td>map</td><td>Request headers, keys with <code>request_header_</code> prefix should be of map type, included in the request headers</td></tr><tr><td>Other keys</td><td>String</td><td>POST request body parameters, currently only supports json type, other key/values will be included in the json structure of the post body</td></tr></tbody></table>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="output-parameters">Output Parameters<a href="#output-parameters" class="hash-link" aria-label="Direct link to Output Parameters" title="Direct link to Output Parameters">​</a></h5>
<p>The <code>json</code> structure returned by the HTTP request will be assigned to the <code>$.output</code> variable.</p>
<blockquote>
<p>Dispatching to K8s Service:
In a K8S environment, it&#x27;s recommended to use the HTTP dispatcher to connect to a K8s Service domain, like <code>http://service_name.namespace/execute.json</code>. For more details about Service, refer to <a href="https://kubernetes.io/docs/concepts/services-networking/service/" target="_blank" rel="noopener noreferrer">Kubernetes Service</a>. You can also use service meshes like <a href="https://istio.io" target="_blank" rel="noopener noreferrer">Istio</a> or other advanced service load balancing mechanisms.For more information on the Service, refer to [Kubernetes Service] (<a href="https://kubernetes.io/docs/concepts/services-networking/service/).Also" target="_blank" rel="noopener noreferrer">https://kubernetes.io/docs/concepts/services-networking/service/).Also</a> use a service grid such as <a href="https://istio.io" target="_blank" rel="noopener noreferrer">Istio</a> or other advanced service load equilibrium mechanisms.</p>
</blockquote>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="chatgpt-dispatcher">ChatGPT Dispatcher<a href="#chatgpt-dispatcher" class="hash-link" aria-label="Direct link to ChatGPT Dispatcher" title="Direct link to ChatGPT Dispatcher">​</a></h4>
<p>Rill Flow supports the OpenAI <a href="https://openai.com/chatgpt" target="_blank" rel="noopener noreferrer">ChatGPT model</a> dispatcher.Use this dispatcher to call Apikey with an OpenAI model.For specific information, please refer to [OpenAI ChatGPT model documents] (<a href="https://platform.openai.com/api-keys" target="_blank" rel="noopener noreferrer">https://platform.openai.com/api-keys</a>)</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="task-attributes-2">Task Attributes<a href="#task-attributes-2" class="hash-link" aria-label="Direct link to Task Attributes" title="Direct link to Task Attributes">​</a></h5>
<table><thead><tr><th>Parameter</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>resourceProtocol</td><td>chatgpt</td><td>Use ChatGPT dispatcher</td></tr></tbody></table>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="input-parameters-1">Input Parameters<a href="#input-parameters-1" class="hash-link" aria-label="Direct link to Input Parameters" title="Direct link to Input Parameters">​</a></h5>
<table><thead><tr><th>Key</th><th>Value Type</th><th>Description</th></tr></thead><tbody><tr><td>apikey</td><td>String</td><td>Apikey for model invocation</td></tr><tr><td>Model</td><td>String</td><td>Model name, see OpenAI<a href="https://platform.openai.com/docs/models" target="_blank" rel="noopener noreferrer">支持的模型列表</a></td></tr><tr><td>Prop</td><td>String</td><td>Text content for model request</td></tr></tbody></table>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="output-parameters-1">Output Parameters<a href="#output-parameters-1" class="hash-link" aria-label="Direct link to Output Parameters" title="Direct link to Output Parameters">​</a></h5>
<p>The <code>json</code> structure that ChatGPT requests to return will be assigned to <code>.output.result</code> variables.Other return values can be found in [OpenAI SDK documents] (<a href="https://platform.openai.com/docs/guides/text-generation/chat-completions-response-form" target="_blank" rel="noopener noreferrer">https://platform.openai.com/docs/guides/text-generation/chat-completions-response-form</a>).</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="alibaba-cloud-model-service-dispatcher">Alibaba Cloud Model Service Dispatcher<a href="#alibaba-cloud-model-service-dispatcher" class="hash-link" aria-label="Direct link to Alibaba Cloud Model Service Dispatcher" title="Direct link to Alibaba Cloud Model Service Dispatcher">​</a></h4>
<p>Rill Flow supports the dispatcher for Alibaba Cloud&#x27;s <a href="https://help.aliyun.com/zh/dashscope" target="_blank" rel="noopener noreferrer">Lingji Model Service</a>. To use this dispatcher, an Apikey for Alibaba Cloud&#x27;s Tongyi Qianwen model invocation is required. For more details, refer to the <a href="https://help.aliyun.com/zh/dashscope/developer-reference/activate-dashscope-and-create-an-api-key" target="_blank" rel="noopener noreferrer">Alibaba Cloud Lingji Model Service Documentation</a>.Use this dispatcher to call Apikey with an Aliyun popular model.Specific information can be found in<a href="https://help.aliyun.com/en/dashscreene/developer-reference/activate-dashscreene-and-create-an-api-key" target="_blank" rel="noopener noreferrer">阿里云灵积模型服务文档</a>.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="task-attributes-3">Task Attributes<a href="#task-attributes-3" class="hash-link" aria-label="Direct link to Task Attributes" title="Direct link to Task Attributes">​</a></h5>
<table><thead><tr><th>Parameter</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>resourceProtocol</td><td>aliyun_ai</td><td>Use Alibaba Cloud AI dispatcher</td></tr></tbody></table>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="input-parameters-2">Input Parameters<a href="#input-parameters-2" class="hash-link" aria-label="Direct link to Input Parameters" title="Direct link to Input Parameters">​</a></h5>
<table><thead><tr><th>Key</th><th>Value Type</th><th>Description</th></tr></thead><tbody><tr><td>apikey</td><td>String</td><td>Apikey for model invocation</td></tr><tr><td>Model</td><td>String</td><td>Model name, see <a href="https://help.aliyun.com/zh/dashscope/developer-reference/token-api" target="_blank" rel="noopener noreferrer">Alibaba Cloud&#x27;s Supported Model List</a></td></tr><tr><td>Message</td><td>string</td><td>Text content for model request</td></tr><tr><td>message_suffix</td><td>string</td><td>(Optional) Suffix for the model request content</td></tr><tr><td>message_prefix</td><td>string</td><td>(Optional) Prefix for the model request content</td></tr></tbody></table>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="output-parameters-2">Output Parameters<a href="#output-parameters-2" class="hash-link" aria-label="Direct link to Output Parameters" title="Direct link to Output Parameters">​</a></h5>
<p>The <code>json</code> structure returned by the Alibaba Cloud request will be assigned to the <code>$.output</code> variable, with <code>$.output.output.text</code> being the text return from the model. Other return values can be referenced in the <a href="https://help.aliyun.com/zh/dashscope/developer-reference/token-api" target="_blank" rel="noopener noreferrer">Alibaba Cloud SDK Documentation</a>.Specifies the dispatcher resource protocol, if null, uses</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://crowdin.com/project/rill-flow/en" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/en/docs/user-guide/defination/flow"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Workflow</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/en/docs/user-guide/defination/executor"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Executor</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#task" class="table-of-contents__link toc-highlight">Task</a><ul><li><a href="#task-attributes" class="table-of-contents__link toc-highlight">Task Attributes</a></li><li><a href="#category" class="table-of-contents__link toc-highlight">Category</a></li><li><a href="#pattern" class="table-of-contents__link toc-highlight">Pattern</a></li><li><a href="#retry" class="table-of-contents__link toc-highlight">Retry</a></li></ul></li><li><a href="#synchronous-and-asynchronous-task-modes" class="table-of-contents__link toc-highlight">Synchronous and Asynchronous Task Modes</a><ul><li><a href="#synchronous-mode-task_sync" class="table-of-contents__link toc-highlight">Synchronous Mode (<code>task_sync</code>)</a></li><li><a href="#asynchronous-mode-task_async" class="table-of-contents__link toc-highlight">Asynchronous Mode (<code>task_async</code>)</a></li></ul></li><li><a href="#dispatcher" class="table-of-contents__link toc-highlight">Dispatcher</a><ul><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#resourceprotocol" class="table-of-contents__link toc-highlight">resourceProtocol</a></li><li><a href="#resourcename" class="table-of-contents__link toc-highlight">resourceName</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/en/docs/intro">Docs</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://weibo.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Weibo<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/weibocom/rill-flow" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ©️ 2024 Weibo, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>